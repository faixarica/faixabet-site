<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>fAIxaBet â€” Simulador AI</title>

<style>
  body {
    font-family: 'Roboto', sans-serif;
    background: linear-gradient(135deg,#34314d 0%,#4f46ad 50%,#414157 100%);
    color: #e0e0ff;
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: flex-start;
    padding: 24px 16px;
  }

  .container {
    max-width: 1000px;
    width: 100%;
    text-align: center;
  }

  /* --- Header com logo --- */
  .logo-faixabet {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 2px;
    font-family: 'Montserrat Alternates', sans-serif;
    font-size: 2rem;
    font-weight: bold;
    letter-spacing: -1px;
    text-decoration: none;
    margin-bottom: 14px;
  }

  .logo-faixabet span { display: inline-block; transition: transform 0.3s ease; }
  .logo-faixabet:hover span { transform: translateY(-2px); }
  .text-white-400 { color: #fff; }
  .text-purple-400 { color: #c084fc; }
  .text-yellow-400 { color: #facc15; }
  .text-blue-400 { color: #60a5fa; }
  .text-green-600 { color: #16a34a; }

  h1 {
    color:#00d4ff;
    text-shadow:0 0 10px rgba(0,212,255,.7);
    font-family:'Orbitron',sans-serif;
  }

  /* --- BotÃµes principais --- */
  .buttons-row {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 12px;
    margin-top: 20px;
  }

  .main-button {
    background: linear-gradient(90deg,#00d4ff,#8a2be2);
    border: none;
    border-radius: 50px;
    padding: 14px 28px;
    color: #fff;
    font-size: 1.1rem;
    font-weight: 700;
    cursor: pointer;
    box-shadow: 0 0 15px rgba(138,43,226,.5);
    transition: all .3s ease;
    flex: 1 1 220px;
    min-width: 180px;
  }
  .main-button:hover { transform: scale(1.05); }

  .click-count {
    margin-top: 10px;
    margin-bottom: 15px;
    color: #a0a0c0;
    animation: pulse 2s infinite;
  }

  /* --- Cards --- */
  .card {
    background: rgba(25,25,50,.8);
    border: 1px solid rgba(138,43,226,.3);
    border-radius: 20px;
    padding: 20px;
    margin-top: 15px;
    box-shadow: 0 10px 25px rgba(0,0,0,.4);
  }
  .card-title { color:#00ffcc; font-weight:700; margin-bottom:10px; }
  .numero-container { display:flex; flex-wrap:wrap; justify-content:center; gap:5px; margin-top:10px; }
  .numero {
    width:40px;height:40px;border-radius:50%;
    display:flex;justify-content:center;align-items:center;
    background-color:#374151;color:#d1d5db;
    border:1px solid #4b5563;font-weight:700;
    transition:transform .2s;
  }
  .numero:hover{transform:scale(1.2);}
  .acerto{background-color:#22c55e!important;color:#fff!important;box-shadow:0 0 8px #22c55e;}
  .novo-numero{background-color:#86efac!important;color:#065f46!important;box-shadow:0 0 10px #6ee7b7;}
  .resultado-final{margin-top:15px;font-weight:bold;}
  .vitoria-ia{color:#ff2a6d;}
  .vitoria-jogador{color:#00ffcc;}
  .empate{color:#a78bfa;}

  /* --- Modal --- */
  .modal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.7);display:none;justify-content:center;align-items:center;z-index:1000;}
  .modal-content{background:#1f1b3a;padding:25px;border-radius:12px;max-width:400px;width:90%;color:#fff;text-align:center;box-shadow:0 0 20px rgba(0,212,255,.4);}
  .modal-content input{width:100%;padding:10px;border:1px solid #555;border-radius:6px;margin-top:10px;margin-bottom:16px;font-size:1rem;}
  .modal-content button{background:linear-gradient(90deg,#00d4ff,#8a2be2);border:none;border-radius:50px;padding:10px 20px;color:#fff;font-weight:700;cursor:pointer;}

  /* --- AnimaÃ§Ãµes --- */
  @keyframes pulse { 0%{opacity:.7}50%{opacity:1}100%{opacity:.7} }

  @keyframes fadeInGlow {
    0% { opacity: 0; transform: scale(0.9); box-shadow: 0 0 0px rgba(255,255,255,0); }
    60% { opacity: 1; transform: scale(1.02); box-shadow: 0 0 15px rgba(0,212,255,0.6); }
    100% { transform: scale(1); box-shadow: 0 0 10px rgba(138,43,226,0.5); }
  }
  .animate-glow { animation: fadeInGlow 1.3s ease forwards; }

  /* --- Responsividade --- */
  @media (max-width:600px){
    .buttons-row{flex-direction:column;align-items:center;}
    .main-button{width:100%;max-width:300px;}
  }
</style>
</head>

<body>
<div class="container">

  <!-- Logo fAIxaBet (redireciona ao site principal) -->
  <a href="https://faixabet.com.br" class="logo-faixabet">
    <span class="text-white-400">f</span>
    <span class="text-purple-400">A</span>
    <span class="text-yellow-400">I</span>
    <span class="text-blue-400">x</span>
    <span class="text-green-600">a</span>
    <span class="font-light">Bet</span>
  </a>

  <h1>Simulador de Palpites IA</h1>
  <p>Compare o desempenho da nossa InteligÃªncia Artificial com um jogador comum.</p>

  <!-- BotÃµes -->
  <div class="buttons-row">
    <button class="main-button" id="simularBtn">ðŸ”„ Gerar Nova SimulaÃ§Ã£o</button>
    <button class="main-button" id="enviarEmailBtn" style="display:none;">ðŸ“© Enviar por E-mail</button>
  </div>

  <div class="click-count" id="contador">SimulaÃ§Ãµes Realizadas: 0</div>
  <div id="cards"></div>
</div>

<!-- Modal -->
<div class="modal" id="emailModal">
  <div class="modal-content">
    <h3>ðŸ“¨ Enviar palpite por e-mail</h3>
    <p>Informe seu e-mail para receber este resultado.</p>
    <input type="email" id="emailInput" placeholder="seuemail@exemplo.com" required />
    <button onclick="enviarEmail()">Enviar</button>
    <div id="emailMsg" style="margin-top:10px;font-size:.9rem;"></div>
  </div>
</div>

<script>
let cliques=0;
let ultimoSorteio=[]; 
let ultimoPalpiteAI=[], ultimoPalpiteJogador=[];

function gerarPalpite(qtd=15){
  const nums=[];
  while(nums.length<qtd){
    const n=Math.floor(Math.random()*25)+1;
    if(!nums.includes(n)) nums.push(n);
  }
  return nums.sort((a,b)=>a-b);
}
function contarAcertos(palpite,sorteio){return palpite.filter(n=>sorteio.includes(n)).length;}
function formatarNumeros(numeros,sorteio,anteriores=[]){
  return numeros.map(n=>{
    const isAcerto=sorteio.includes(n);
    const isNovo=anteriores.length && !anteriores.includes(n);
    let cls='numero';
    if(isAcerto) cls+=' acerto';
    if(isNovo) cls+=' novo-numero';
    return `<div class="${cls}">${String(n).padStart(2,'0')}</div>`;
  }).join('');
}

async function rodarSimulacao(){
  cliques++;
  document.getElementById('contador').innerText=`SimulaÃ§Ãµes Realizadas: ${cliques}`;
  const sorteio=gerarPalpite(15);

  // IA: 10 do sorteio + 5 aleatÃ³rios
  const iaAcertos=sorteio.slice(0,10);
  const resto=gerarPalpite(25).filter(n=>!iaAcertos.includes(n));
  while(iaAcertos.length<15) iaAcertos.push(resto.pop());
  const ia=iaAcertos.sort((a,b)=>a-b);
  const jogador=gerarPalpite(15);

  ultimoPalpiteAI=ia; ultimoPalpiteJogador=jogador; ultimoSorteio=sorteio;

  const acertosIA=contarAcertos(ia,sorteio);
  const acertosJogador=contarAcertos(jogador,sorteio);

  let resultado='',classe='';
  if(acertosIA>acertosJogador){resultado='ðŸ¤– AI Superou o Jogador! âœ…';classe='vitoria-ia';}
  else if(acertosIA<acertosJogador){resultado='ðŸŽ‰ VocÃª Superou a AI!';classe='vitoria-jogador';}
  else{resultado='ðŸ¤ Empate!';classe='empate';}

  document.getElementById('cards').innerHTML=`
    <div class="card">
      <div class="card-title">ðŸŽ¯ Sorteio Oficial (Simulado)</div>
      <div class="numero-container">${formatarNumeros(sorteio,[],ultimoSorteio)}</div>
    </div>
    <div class="card">
      <div class="card-title">ðŸ§  AI</div>
      <div class="numero-container">${formatarNumeros(ia,sorteio)}</div>
      <p>Acertos: <strong>${acertosIA}</strong></p>
    </div>
    <div class="card">
      <div class="card-title">ðŸ‘¤ Jogador Comum</div>
      <div class="numero-container">${formatarNumeros(jogador,sorteio)}</div>
      <p>Acertos: <strong>${acertosJogador}</strong></p>
      <div class="resultado-final ${classe}">${resultado}</div>
    </div>
  `;

  const emailBtn = document.getElementById('enviarEmailBtn');
  emailBtn.style.display='inline-block';
  emailBtn.classList.add('animate-glow');
  setTimeout(()=>emailBtn.classList.remove('animate-glow'),2500);
}

document.getElementById('simularBtn').addEventListener('click',rodarSimulacao);
window.addEventListener('load',()=>setTimeout(rodarSimulacao,500));

document.getElementById('enviarEmailBtn').addEventListener('click',()=>{
  document.getElementById('emailModal').style.display='flex';
});

async function enviarEmail(){
  const email=document.getElementById('emailInput').value.trim();
  const msgBox=document.getElementById('emailMsg');
  if(!email){msgBox.textContent='âš ï¸ Digite um e-mail vÃ¡lido.';return;}

  msgBox.textContent='â³ Enviando...';
  try{
    const payload={email, sorteio:ultimoSorteio, ai:ultimoPalpiteAI, jogador:ultimoPalpiteJogador};
    const res = await fetch("https://backend-faixabet.onrender.com/send_palpite", {
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body:JSON.stringify(payload)
    });

    const data = await res.json();
    msgBox.textContent = data.status === "ok"
      ? "âœ… Palpite enviado com sucesso!"
      : "âŒ Erro ao enviar: " + (data.message || "Falha desconhecida.");
  }catch(e){
    console.error(e);
    msgBox.textContent = "âš ï¸ Erro de conexÃ£o. Tente novamente.";
  }
  setTimeout(()=>document.getElementById('emailModal').style.display='none',2500);
}

window.addEventListener('click',e=>{
  if(e.target.id==='emailModal') e.target.style.display='none';
});
</script>
</body>
</html>
